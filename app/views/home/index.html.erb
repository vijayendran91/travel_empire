<%= render :partial => 'home/navbar_files/navbar'%>
<center>
  <div id="formContainer" class="shadow-lg p-3 mb-5 bg-white rounded">

    <div id="initBtnCntnr">
      <div class="form-row mt-4">
        <div class="form-group col-md-6">
          <button type="button" id="bookCab" name="button" class="btn green-btn ">Book a Cab</button>
        </div>
        <div class="form-group col-md-6">
          <%= link_to "Make a Payment", "https://pmny.in/aIlQzaGFxaIb",:id => "makePayment", :class=> "btn green-btn"%>
        </div>
      </div>
    </div>
    <%=form_for Trip.new do |f|%>
      <%=render :partial => 'home/cab_booking/per_bus', :locals => {:f => f}%>
      <%=render :partial => 'home/cab_booking/cab_booking_form', :locals => {:f => f}%>
    <%end%>
  </div>
</center>
<script type="text/javascript" src="data/districts.json"></script>
<script>
  let porb = "";
  let tor = "";
  let locs = 0;
  let dist = JSON.stringify(districts);
  districts_data = JSON.parse(dist)["data"];
  $(document).ready(function(){
    $('.perOrBus').hide();
    $('#addLocation').hide();
    $('#bookCab').on('click', function(){
        $('#bookCab').hide();
        $('#makePayment').hide();
        $('.perOrBus').show();
      // $('.cabBookingForm').show();
    });

    $('#personalRadio').on('click',function(){
      $('#gst').hide();
      $('#gstLabel').hide();
      $('.cabBookingForm').show();
    });

    $('#businessRadio').on('click',function(){
      $('#gst').show();
      $('#gstLabel').show();
      $('.cabBookingForm').show();
    });

    $( "#inlineFormCustomSelect" ).change(function() {
      tor =  $(this).val();
      console.log(tor);
      switch(tor){
          case "ow":
              $('#addLocation').hide();
              $('#toDistSelect').show();
              $('#locationSwap').show();
              $('#toAreaLabel').show();
              $('#toDistLabel').show();
              $('#toArea').show();
              $('.locations').hide();
              break;
          case "rtt":
              $('#addLocation').hide();
              $('#toDistSelect').show();
              $('#toAreaLabel').show();
              $('#locationSwap').show();
              $('.locations').hide();
              $('#toDistLabel').show();
              $('#toArea').show();
              break;
          case "rt":
              $('.locations').show();
              $('#addLocation').show();
              $('#locationSwap').hide();
              $('#toDistSelect').hide();
              $('#toDistLabel').hide();
              $('#toAreaLabel').hide();
              $('#toArea').hide();
              break;
          case "my":
              $('.locations').show();
              $('#addLocation').show();
              $('#locationSwap').hide();
              $('#toDistSelect').hide();
              $('#toAreaLabel').hide();
              $('#toDistLabel').hide();
              $('#toArea').hide();
              break;
          case "hy":
              $('.locations').hide();
              $('#addLocation').hide();
              $('#locationSwap').hide();
              $('#toDistSelect').hide();
              $('#toAreaLabel').hide();
              $('#toDistLabel').hide();
              $('#toArea').hide();
              break;
        location.reload();
      }
    });

    $('#addLocation').on('click',function(){
      locs++;
      if(locs<5){
        parElem = document.getElementById('multiLocations');
        input = document.createElement("input");
        input.setAttribute('type','text');
        input.setAttribute('class',"form-control mb-3 locations");
        parElem.appendChild(input);
      }else{
        window.alert("You can add only maximum of 4 locations");
      }
    });

    for(let i=0; i<districts_data.length;i++){
      $("#fromDistSelect").append('<option value="'+districts_data[i]+'">' + districts_data[i] + '</option>');
      $("#toDistSelect").append('<option value="'+districts_data[i]+'">' + districts_data[i] + '</option>');
    }

  });
</script>
